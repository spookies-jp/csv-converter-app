(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1401:e=>{e.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",footer:"Home_footer__yFiaX",title:"Home_title__hYX6j",description:"Home_description__uXNdx",card:"Home_card__E5spL",uploadContainer:"Home_uploadContainer__fvHj1",uploadButton:"Home_uploadButton__wPWeA",fileInput:"Home_fileInput__m8A_b",fileName:"Home_fileName__mufoT",loading:"Home_loading__Z_JGo",loadingSpinner:"Home_loadingSpinner__XoUQF",spin:"Home_spin__VEV0f",error:"Home_error__514Ji",results:"Home_results__lDLyn",fadeIn:"Home_fadeIn__6AUDn",fileList:"Home_fileList__DdcvS",fileItem:"Home_fileItem__xJOhV",fileHeader:"Home_fileHeader__5_1b0",fileInfo:"Home_fileInfo__0i46t",encoding:"Home_encoding__vb_s_",alreadyUtf8:"Home_alreadyUtf8__w8lS2",removeButton:"Home_removeButton__rEUbQ",downloadButton:"Home_downloadButton__GHDC0",downloadButtonUtf8:"Home_downloadButtonUtf8__c5Rg2",actionBar:"Home_actionBar__tWRGD",clearAllButton:"Home_clearAllButton__sZ_f4"}},2936:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9287)}])},6403:()=>{},9287:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>f});var i=t(7876),l=t(4232),a=t(7328),o=t.n(a),s=t(1401),r=t.n(s),c=t(5023),d=t(9275),_=t.n(d),m=t(8220);function f(){let[e,n]=(0,l.useState)([]),[t,a]=(0,l.useState)(!1),[s,d]=(0,l.useState)(""),f=(0,l.useRef)(null),u=async e=>{let t=Array.from(e.target.files);if(0===t.length)return;let i=t.filter(e=>e.name.endsWith(".csv"));if(0===i.length)return void d("CSVファイルのみアップロードできます");a(!0),d("");try{let e=[];for(let n of i){var l;let t=await n.arrayBuffer(),i=m.Buffer.from(t),a=c.detect(i),o=(null==a||null==(l=a.encoding)?void 0:l.toLowerCase())||"",s=/^[\x00-\x7F]*$/.test(i.toString("binary"));if((!o||a.confidence<.2||s)&&(o="shift_jis"),!["utf-8","ascii","shift_jis","windows-1252"].includes(o))throw Error("".concat(n.name," は未対応の文字コードです（推定: ").concat(o,"）"));let r="utf-8"===o||"ascii"===o,d=_().decode(i,o),f="\uFEFF"+d;e.push({originalName:n.name,content:f,originalEncoding:o,isAlreadyUtf8:r})}n(n=>[...n,...e]),f.current&&(f.current.value="")}catch(e){console.error("Error converting files:",e),d("ファイルの変換中にエラーが発生しました: "+e.message)}finally{a(!1)}},h=e=>{n(n=>{let t=[...n];return t.splice(e,1),t})},p=(e,n)=>{if(!e)return;let t=new Blob([e],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.setAttribute("download","utf8-".concat(n||"converted.csv")),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)};return(0,i.jsxs)("div",{className:r().container,children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"CSV文字コード変換アプリ"}),(0,i.jsx)("meta",{name:"description",content:"CSVファイルをUTF-8に変換するアプリ"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),(0,i.jsxs)("main",{className:r().main,children:[(0,i.jsx)("h1",{className:r().title,children:"CSV文字コード変換アプリ"}),(0,i.jsx)("p",{className:r().description,children:"CSVファイルをUTF-8に変換します"}),(0,i.jsxs)("div",{className:r().card,children:[(0,i.jsxs)("div",{className:r().uploadContainer,children:[(0,i.jsxs)("label",{htmlFor:"csvFile",className:r().uploadButton,children:["CSVファイルを追加",(0,i.jsx)("input",{type:"file",id:"csvFile",accept:".csv",onChange:u,className:r().fileInput,multiple:!0,ref:f})]}),e.length>0&&(0,i.jsxs)("span",{className:r().fileName,children:[e.length," ファイル"]})]}),t&&(0,i.jsx)("div",{className:r().loading,children:"変換処理中..."}),s&&(0,i.jsx)("div",{className:r().error,children:s}),e.length>0&&(0,i.jsxs)("div",{className:r().results,children:[(0,i.jsx)("h3",{children:"変換済みファイル"}),(0,i.jsx)("div",{className:r().fileList,children:e.map((e,n)=>(0,i.jsxs)("div",{className:r().fileItem,children:[(0,i.jsxs)("div",{className:r().fileHeader,children:[(0,i.jsxs)("div",{className:r().fileInfo,children:[(0,i.jsx)("span",{className:r().fileName,children:e.originalName}),(0,i.jsx)("span",{className:r().encoding,children:e.isAlreadyUtf8?"既にUTF-8形式":"元の文字コード: ".concat(e.originalEncoding)})]}),(0,i.jsx)("button",{onClick:()=>h(n),className:r().removeButton,children:"\xd7"})]}),(0,i.jsx)("button",{onClick:()=>p(e.content,e.originalName),className:r().downloadButton,children:e.isAlreadyUtf8?"ダウンロード":"UTF-8でダウンロード"})]},n))}),(0,i.jsx)("div",{className:r().actionBar,children:(0,i.jsx)("button",{onClick:()=>n([]),className:r().clearAllButton,children:"全てのファイルを削除"})})]})]})]}),(0,i.jsx)("footer",{className:r().footer,children:(0,i.jsxs)("p",{children:["CSV文字コード変換アプリ \xa9 ",new Date().getFullYear()]})})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[252,636,593,792],()=>n(2936)),_N_E=e.O()}]);