# CSV文字コード変換アプリ

CSV ファイルを UTF-8 に変換するための Web アプリケーションです。

## WSL2 + Docker での実行方法

### 開発環境

開発環境では、ソースコードの変更を即座に反映させながら開発できます。

```bash
# アプリケーションの起動
docker-compose up

# バックグラウンドで起動する場合
docker-compose up -d

# コンテナの停止
docker-compose down
```

アプリケーションは http://localhost:3000 でアクセスできます。

### 本番環境

本番環境用のビルドと実行を行います。

```bash
# 本番用イメージをビルドして起動
docker-compose -f docker-compose.prod.yml up --build -d

# コンテナの停止
docker-compose -f docker-compose.prod.yml down
```

## GitHub Pages へのデプロイ

GitHub Pages にデプロイするには、次のコマンドを実行します：

```bash
# 静的ファイルを生成
docker-compose -f docker-compose.prod.yml run --rm app npm run deploy

# 生成された out ディレクトリの内容を GitHub Pages にデプロイ
# (GitHub Actions で自動的に行われます)
```

## 主な機能

### CSV文字コード変換アプリ (`/`)

- CSVファイルの文字コードを検出
- UTF-8 に自動変換
- 文字列置換機能
- 変換後のファイルのダウンロード

### CSV質問グループ並び替えアプリ (`/sort`)

- CSVファイルの文字コードを UTF-8 に変換
- 質問グループ（質問ID、質問タイトル、回答ID、回答）を自動検出
- 質問IDの値を昇順にソートして正しい列に並び替え
- 全ユーザーの回答順序を統一
- BOM付き UTF-8 で出力

## 使い方

### 文字コード変換 (`/`)

1. CSVファイルをアップロード
2. 自動的に文字コードを検出して UTF-8 に変換
3. 必要に応じて文字列置換ルールを設定
4. 「UTF-8でダウンロード」ボタンでダウンロード

### 質問グループ並び替え (`/sort`)

1. CSVファイルをアップロード（質問ID、質問タイトル、回答ID、回答の列を含むもの）
2. 自動的に文字コードを UTF-8 に変換
3. 質問グループを質問IDの値で昇順ソート
4. 「並び替えてダウンロード」ボタンでダウンロード

**並び替えの仕組み**:
- 各データ行から質問IDの値を抽出（例: 1897, 1900, 1901...）
- 昇順ソート
- 質問ID1の列に最小値、質問ID2の列に2番目の値...と配置
- 質問ID、質問タイトル、回答ID、回答の4つ組をセットで移動
